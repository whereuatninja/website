extends layout

block content
    // Custom Slider CSS
    link(href='/css/bootstrap-slider.css', rel='stylesheet')
    link(href='/css/bootstrap-datepicker.css', rel='stylesheet')
    link(href='/css/pirate.css', rel='stylesheet')
    script(src='/scripts/bootstrap-slider.js')
    script(src='/scripts/bootstrap-datepicker.js')
    script(src='/scripts/moment.js')
    script(src='/scripts/moment-timezone.js')
    script(src='/scripts/pirate.js')
    .container-fluid
      .row
        .col-lg-2.sidebar.hidden-md-down
          ul.nav.nav-stacked
            li.nav-header
              h5
                span
                  | My Ninjas 
              ul#ninjaList.nav.nav-list
                if user.ninjas
                  each ninja in user.ninjas
                    li.sidebar-list-item
                      a(href='/pirate/' + ninja.id)
                        span.name #{ninja.name}
                else
                  li.sidebar-list-item
                    a(href='#') No Ninjas 
            li.nav-header
              h5
                span
                  | My Pirates
              ul#pirateList.nav.nav-list
                li.sidebar-list-item
                  a(href='#') No Pirates Yet
        .col-lg-10.col-lg-offset-2.main
          if !viewModel.locations
            if viewModel.ninja
              h3 No locations found for&nbsp;
                span.name #{viewModel.ninja.name}
            else
              h3 Hmmm... you don't seem to have any friends to follow :(
          else
            h2.sub-header Find&nbsp;
              span.name #{viewModel.ninja.name}!
            #map
            if viewModel.locations
              br
              span#play-information
                b
              div.test-well
                //button#button-datepicker.btn.btn-secondary.btn-lg.btn-margin(type='button', aria-label='Pick a Date') Pick a Date
                    //i.fa.fa-calendar.fa-3(aria-hidden='true', style='padding-left: .25em')
                button#button-filter.btn.btn-primary.btn-lg.btn-margin Filter
                  i.fa.fa-filter.fa-3(aria-hidden='true', style='padding-left: .25em')
                  i#button-filter-loader.fa.fa-refresh.fa-3.refresh-animate(aria-hidden='true')
                button#button-play.btn.btn-secondary.btn-lg.btn-margin Play
                  i.fa.fa-play.fa-3(aria-hidden='true', style='padding-left: .25em')
                button#button-center-recent.btn.btn-secondary.btn-lg.btn-margin Center On Most Recent Location
                  i.fa.fa-bullseye.fa-3(aria-hidden='true', style='padding-left: .25em')
                br
                b#slider-after-label After
                b#slider-before-label Before
                br
                input#timeSlider(type='text')
                center
                  .div#datepicker

            h2.sub-header Moments

            if viewModel.locations
              script(src='//maps.googleapis.com/maps/api/js?key=AIzaSyCKJnJars0xRRUHCtbzBgTG7TWMQLk_rYc')
              script(type='text/javascript').
                var ninjaId = "#{viewModel.ninjaId}";
                $(document).ready(function(){
                  var dateSlider = new WhereUAtDateSlider.initialize({
                      sliderId: "#timeSlider",
                      minSliderTime: "#{viewModel.minSliderTime}",
                      maxSliderTime: "#{viewModel.maxSliderTime}",
                      beforeLabelId: "slider-before-label",
                      afterLabelId: "slider-after-label",
                      timeZoneLabelId: "slider-timezone-label"
                  });
                  var mapModule = MapModule.initialize(document.getElementById('map'), !{JSON.stringify(viewModel.locations)}, !{JSON.stringify(viewModel.mostRecentLocation)});
                  var locationLoader = LocationLoader.initialize();
                  var locationDatePicker = LocationDatePicker.initialize("#{viewModel.minSliderTime}", "#{viewModel.maxSliderTime}");
                });
              .container.m-t-md
                .location-cards
                  - var locations = viewModel.locations;
                  include locationlist

                div#activityLoader
                  strong Loading Moments...
                  i.fa.fa-refresh.fa-3.refresh-animate(aria-hidden='true')